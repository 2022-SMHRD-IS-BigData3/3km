<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="km/model/SNSDAO">

	<select id="login" parameterType="km.model.UserVO" resultType="km.model.UserVO">
		select *
		from USER_INFO
		where email=#{email} and pw=#{pw}
	</select>
	
	<insert id="join" parameterType="km.model.UserVO">
		INSERT INTO USER_INFO(USER_ID,EMAIL,PW,NICKNAME,BRITHDAY)
		VALUES(USER_SEQ.nextval,#{email},#{pw},#{nickname},#{birthday})
	</insert>
	
	
	<insert id="write" parameterType="km.model.PostVO">
		INSERT INTO POST(POST_ID,TITLE,POST_CONTENTS,POSTING_DATE,USER_ID,KATEGORY)
		VALUES(POST_SEQ.nextval,#{title},#{POST_CONTENTS},sysdate,1,#{postType})
	</insert>
	
	<insert id="write2" parameterType="km.model.ImgVO">
		INSERT INTO POST_IMG
		VALUES(IMG_SEQ.nextval,'원래이름2','저장된이름2',#{m_fileFullPath ,jdbcType=VARCHAR},'파일크기','JPG',SYSDATE,POST_SEQ.CURRVAL)
	</insert>
	
	<select id="img" resultType="km.model.ImgVO">
		select *
		from POST_IMG
		ORDER BY post_id
	</select>
	
	<select id="post" resultType="km.model.PostVO">
		select *
		from POST
	</select>
	
	<select id="qna" resultType="km.model.PostVO">
		select *
		from POST
		where kategory = 'question'
	</select>




</mapper>